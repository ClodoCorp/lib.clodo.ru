---
title: ClodoAPI
description: "Описание ClodoAPI (версия 1.0)"
layout: article
category: Хостинг Clodo.ru
---


Данный документ содержит описание ClodoAPI версии 1.0. Документ будет пополняться и расширяться по мере введения новой функциональности в API. По всем вопросам использования нашего api обращайтесь в службу технической поддержки Clodo.



* t
{:toc}



## Метод авторизации

### Авторизация

Свойства метода:

**HTTP метод:** GET  
**URI:**        /  
**Входные параметры (HTTP headers):**  

  - **X-Auth-User** - логин пользователя
  - **X-Auth-Key** - ключ пользователя (ключ можно заказать в панели управления ресурсами в разделе "Мой профиль")

**Выходные параметры (HTTP headers):**

  - **X-Server-Management-Url** - url доступа к функциям API
  - **X-Auth-Token** - токен авторизации

Коды возврата:

**204** - без ошибок
**401** - ошибка авторизации
Пример запроса:

GET / HTTP/1.1
Host: api.clodo.ru
X-Auth-User: jdoe
X-Auth-Key: a86850deb2742ec3cb41518e26aa2d89
Пример ответа:

HTTP/1.1 204 No Content
Date: Mon, 12 Nov 2007 15:32:21 GMT
Server: Apache
X-Server-Management-Url: https://api.clodo.ru/v1
X-Auth-Token: eaaafd18-0fed-4b3a-81b4-663c99ec1cbb
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Формат запроса
Обращение(кроме авторизации) должно производиться на адрес, полученный в поле "X-Server-Management-Url" при авторизации + URL команды. Например:
X-Server-Management-Url: https://api.clodo.ru/v1
URL команды: /servers
Итоговый URL: https://api.clodo.ru/v1/servers

При каждом обращении к API (кроме авторизации) в заголовке HTTP-запроса должно присутствовать поле "X-Auth-Token" (значение этого поля получается при авторизации). Срок действия данного токена - 20 минут. По истечении данного времени необходимо заново произвести авторизацию и получить новый токен.

В запросе могут дополнительно применяться следующие заголовки:
Accept - указывает на формат, в котором вы хотите получить ответ (напр. "Accept: application/json" или "Accept: application/xml");
Content-type - формат, в котором вы передаете в запросе дополнительные параметры. Как и предыдущий может быть в двух вариантах - "Content-type: application/json; charset=UTF-8" или "Content-type: application/xml; charset=UTF-8". Важен только в случае запроса, требующего дополнительных параметров.
Формат ответа
При ответе на запрос к API в зависимости от результатов обработки обращения выставляется соответствующий http-код. При успешном выполнения запроса будет установлен - 200 (если есть данные для возврата пользователю) или 204 (если данных нет). При ошибке будет установлен код 4xx (код варируется в зависимости от ошибки). Кроме того будет возвращено расширенное сообщение (в формате json или xml - в зависимости от поля "Accept" в запросе) со следующими параметрами:

code - код ошибки
message - наименование ошибки
details - расширенное описание ошибки
Пример сообщения об ошибке:
<?xml version="1.0" encoding="UTF-8"?>
<Forbidden code="403">
  <message>Forbidden</message>
  <details>Доступ закрыт</details>
</Forbidden>
<?xml version="1.0" encoding="UTF-8"?>
<NotFound code="404">
  <message>Not Found</message>
  <details>VPS не найдена</details>
</NotFound>
{"NotFound":{"code":404,"message":"Not Found","details":"Модуль не найден"}}