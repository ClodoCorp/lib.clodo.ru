<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	
		<title>LAMP</title>
	
	
	<meta name="keywords" content="хостинг, виртуальный сервер, vds, vps, cloud" />
	<meta name="description" content="База знаний поможет Вам в вопросах администрирования Вашего виртуального сервера VPS/VDS. База знаний содержит материалы по развертыванию широкого спектра серверных решений, от веб-серверов с базами данных до более сложных конфигураций." />
	<link rel="stylesheet" href="/pstyle.css" type="text/css" media="screen" />

	<link rel="shortcut icon" href="http://lib.clodo.ru/favicon.ico" />
	<link rel="image_src" href="http://lib.clodo.ru/favicon.ico" />

	<!--[if IE]>

		<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>

		<script type="text/javascript" src="/js/excanvas.js"></script>
		<style type="text/css">
		table.header td {
			padding:0;
		}
		.contentcolumn div.serverlist {
			width: 40%;
			margin: 15px 3% 25px 3%;
		}
		table.header td.menu table.main_menu div {
			margin-left: 2px;
		}
		</style>
	<![endif]-->
</head>

<body>


	<table cellpadding="0" cellspacing="0" border="0" width="100%">
	<tr><td height="115">
		<div class="botsi"></div>
		<div class="header"></div>
		<table cellpadding="0" cellspacing="0" width="100%" border="0" class="header">
			<tr>
				<td rowspan="2" class="logo"><a href="/"><img src="/images/def_skin/logo.png" border="0" alt="Панель управления хостингом CLODO.RU" /></a></td>
				<td rowspan="2" class="slog">
					<p><nobr>База знаний Clodo.ru</nobr><br /> <font class="mslink"><a href="http://www.clodo.ru">Перейти на сайт clodo.ru</a></font></p>
				</td>
				<td class="user" align="right">
				<!--
					<form action="/search/" method="get" enctype="multipart/form-data"><font style="font-size: 14px;">Поиск по базе знаний</font> <input type="text" size="50" name="search" value=""><input type="submit" id="do" value="Искать" title="Search"></form>
				-->
				</td> 
			</tr>
			<tr>
				<td class="menu" align="right" valign="bottom">
		


					<table cellpadding="0" cellspacing="0" border="0" class="main_menu">
						<tr>
							<td><div><a href="http://panel.clodo.ru/">Панель управления</a></div></td>
							<td class="menusep">&nbsp;</td>
							<td><div><a href="http://forum.clodo.ru">Форум&nbsp;поддержки</a></div></td>
							<td class="menusep">&nbsp;</td>
							<td><div class="current"><a href="/">База знаний</a></div></td>

						</tr>
					</table>

				</td>
			</tr>
		</table>
	</td></tr>
	<tr><td valign="top">
		<div class="maincontainer">
		<table cellpadding="0" cellspacing="0" width="100%" style="padding: 0 30px;">
			<tr>
				<td valign="top" width="20%">
				<div class="balanceblock">
				<div class="cashflow">


					<!-- LEFT MENU -->
					<div class="categoryhead"><b>Разделы базы знаний</b></div>

						
							
							

							
								<div class="category1item"><a href="/clodo/">Хостинг Clodo.ru</a></div>
							
						
							
							

							
								<div class="category1item"><a href="/cloud-storage/">Облачное хранилище</a></div>
							
						
							
							

							
								<div class="category1item"><a href="/vps-control-panel/">Панели управления VPS</a></div>
							
						
							
							

							
								<div class="category1item"><a href="/getting-started/">Первые шаги</a></div>
							
						
							
							

							
								<div class="category1item"><a href="/linux/">Используем Linux</a></div>
							
						
							
							

							
								<div class="category1item"><a href="/CMS/">CMS</a></div>
							
						
							
							

							
								<div class="category1item nobottomborder"><a href="/web-server/">WEB-Сервер</a></div>
								<div class="category2item">
									
											<div class="category1item"><a href="/web-server/webserver-lna.html">Nginx + Apache</a></div>
									
											<div class="category1item"><a href="/web-server/LAMP.html">LAMP</a></div>
									
								</div>
							
						
							
							

							
								<div class="category1item"><a href="/email/">Email</a></div>
							
						
							
							

							
								<div class="category1item"><a href="/linux-security/">Безопасность</a></div>
							
						
							
							

							
								<div class="category1item"><a href="/network/">Сеть</a></div>
							
						
							
					</div>
					<!-- !LEFT MENU -->

				</div>
				</td>
				<td valign="top" width="80%" class="maintd">
			<div class="contentwrapper">
				<div class="contentcolumn" style="margin-left: 0;">
					<div class="innertube">

	<!-- TOP NAVIBAR _ START-->
<div class="crosh">
	<a href="/">База знаний</a> ::
	<a href="/web-server">WEB-Сервер</a> :: 
	LAMP
</div>
<!-- TOP NAVIBAR _ END-->

<h1>Linux, Apache, MySQL, PHP</h1>

<!-- ARTICLE _ START -->
<p>LAMP — акроним, обозначающий комплекс серверного программного обеспечения, широко используемый на веб-серверах. LAMP назван по первым буквам входящих в его состав компонентов:</p>

<ul>
  <li>Linux — операционная система Linux;</li>
  <li>Apache — веб-сервер;</li>
  <li>MySQL — СУБД;</li>
  <li>PHP — язык программирования, используемый для создания веб-приложений.</li>
</ul>

<p>Изначально эти программные продукты не разрабатывались специально для работы друг с другом, такая связка стала весьма популярной, в первую очередь из-за своей низкой стоимости (все её составляющие являются открытыми и могут быть бесплатно загружены из Интернета).</p>

<p class="tip">Внимание. Все команды, описанные в статье, выполняются от пользователя root.</p>

<ul id="markdown-toc">
  <li><a href="#debian-6ubuntu">Установка на Debian 6/Ubuntu</a>    <ul>
      <li><a href="#web--apache">Установка и конфигурация web-сервера Apache</a></li>
      <li><a href="#virtualhosts">Настройка Virtualhosts</a></li>
      <li><a href="#mysql">Установка MySQL</a></li>
      <li><a href="#mysql-----mysql">Настройка MySQL и настройка базы данных MySQL</a></li>
      <li><a href="#php">Установка и настройка PHP</a></li>
    </ul>
  </li>
  <li><a href="#centosfedora">Установка на CentOS/Fedora</a>    <ul>
      <li><a href="#web-">Установка Web-сервера</a></li>
      <li><a href="#virtualhosts-1">Настройка Virtualhosts</a></li>
      <li><a href="#mysql-1">Установка и конфигурирование MySQL</a></li>
      <li><a href="#php-1">Установка и настройка PHP</a></li>
    </ul>
  </li>
  <li><a href="#arch-linux">Установка на Arch Linux</a>    <ul>
      <li><a href="#web--apache-1">Установка и конфигурация web-сервера Apache</a></li>
      <li><a href="#virtualhosts-2">Настройка virtualhosts</a></li>
      <li><a href="#mysql-2">Установка и конфигурирование MySQL</a></li>
      <li><a href="#mysql-----mysql-1">Настройка MySQL и настройка базы данных MySQL</a></li>
      <li><a href="#php-2">Установка и настройка PHP</a></li>
    </ul>
  </li>
</ul>

<h2 id="debian-6ubuntu">Установка на Debian 6/Ubuntu</h2>

<p>Начинать установку стоит с обновления списка пакетов.</p>

<pre><code>aptitude update
</code></pre>

<h3 id="web--apache">Установка и конфигурация web-сервера Apache</h3>

<pre><code>aptitude -y install apache2
</code></pre>

<p>Теперь мы настроим виртуальный хостинг, чтобы мы могли разместить несколько доменов (или субдоменов) на сервере. Созданными доменами можно управлять с помощью различных пользователей или одного пользователя.</p>

<h3 id="virtualhosts">Настройка Virtualhosts</h3>

<p>Существуют различные способы создания виртуальных хостов, однако мы рекомендуем метод описанный ниже.</p>

<p>По умолчанию, Apache прослушивает все IP-адреса, доступные виртуальному серверу. Мы должны настроить его на прослушивание только адреса, который мы укажем. Даже если у вас есть только один IP адрес, не стоит пренебрегать этой процедурой.</p>

<p>Начните с изменения параметра NameVirtualHost entry в файле /etc/apache2/ports.conf:</p>

<p>Редактируем файл /etc/apache2/ports.conf:</p>

<pre><code>NameVirtualHost	62.76.41.150:80
</code></pre>

<p class="tip">Замените 62.76.41.150 на свой IP-адрес!</p>

<p>Теперь, изменим VirtualHost сайта по умолчанию в файле /etc/apache2/sites-available/default, запись <virtualhost> должна выглядеть так:</virtualhost></p>

<p>Редактируем файл /etc/apache2/sites-available/default:</p>

<pre><code>&lt;VirtualHost	62.76.41.150:80&gt;
</code></pre>

<p>Редактируем файл /etc/apache2/sites-available/domain.tld</p>

<p class="tip">Здесь domain.tld - это ваш домен</p>

<pre><code>&lt;VirtualHost 62.76.41.150:80&gt; 
     ServerAdmin mail@domain.tld
     ServerName domain.tld
     ServerAlias www.domain.tld
     DocumentRoot /srv/www/domain.tld/public_html/
     ErrorLog /srv/www/domain.tld/logs/error.log 
     CustomLog /srv/www/domain.tld/logs/access.log combined
&lt;/VirtualHost&gt;
</code></pre>

<p>Примечание по поводу этого примера конфигурации:</p>

<ul>
  <li>
    <p>Каталог /srv/www для расположения файлов и скриптов для сайтов виртуального хостинга выбран для примера. При необходимости эти файлы можно расположить в других местах.</p>
  </li>
  <li>
    <p>ErrorLog и CustomLog создаются для отслеживания ошибок и сбора статистики. Их создание не обязательно. Если они определены (как показано выше), каталоги должны быть созданы до перезагрузки Apache.</p>
  </li>
</ul>

<p>Перед тем, как мы станем использовать созданную конфигурацию, необходимо создать указанные в ней каталоги. Для этого выполним следующие команды:</p>

<pre><code>mkdir -p /srv/www/domain.tld/public_html
mkdir -p /srv/www/domain.tld/logs
</code></pre>

<p>После того как вы настроили виртуальные хосты, выполните следующие команды:</p>

<pre><code>a2ensite domain.tld
/etc/init.d/apache2 reload
</code></pre>

<p>Если вам когда-нибудь понадобится отключить сайт, вы можете использовать команду a2dissite. Например, если вы хотите отключить сайт clodo.com, вы должны выполнить следующую команду:</p>

<pre><code>a2dissite domain.tld
</code></pre>

<p>Для включения сайта используйте команду a2ensite.</p>

<p>Помните, что после включения, отключения или изменение любого конфигурационного файла Apache необходимо перезагрузить Apache командой:</p>

<pre><code>/etc/init.d/apache2 reload
</code></pre>

<p>Предполагается, что вы уже настроили DNS для вашего домена, виртуальный хостинг для вашего домена теперь должен работать. Помните, что Вы можете создать столько виртуальных хостов сколько вам необходимо.</p>

<h3 id="mysql">Установка MySQL</h3>

<p>Первым шагом является установка MySQL-сервера, для этого необходимо выполнить следующую команду:</p>

<pre><code>aptitude -y install mysql-server
</code></pre>

<p>Во время установки вам будет предложено ввести пароль пользователя root для MySQL. Введенный пароль вы сможете изменить позже.</p>

<p class="tip">Обратите внимание, что пользователь root в MySQL и в системе не имеют ничего общего кроме названия.</p>

<p>MySQL сервер готов для настройки и запуска. В данный момент, нет необходимости изменять конфигурационный файл MySQL, можно лишь добавить, что распологается он здесь /etc/my.cnf.</p>

<h3 id="mysql-----mysql">Настройка MySQL и настройка базы данных MySQL</h3>

<p>После установки MySQL, рекомендуется использовать mysql_secure_installation, эта программа поможет вам настроить безопасность в MySQL. Во время работы mysql_secure_installation, вам будет представлена возможность изменить пароль MySQL для root пользователя (по умолчанию он не установлен), удалить анонимные учетные записи пользователей и удалить тестовые базы данных. На все предложения запущенной программы рекомендуется, чтобы вы ответили “да” на все предложенные параметры. Если вам будет предложено перезагрузить таблицы привилегий, выберите “да”. Выполните следующую команду, чтобы запустить программу:</p>

<pre><code>mysql_secure_installation
</code></pre>

<p>Далее, мы создадим базу данных и предоставим пользователям разрешений на использование баз данных. Для этого необходимо войти в MySQL:</p>

<pre><code>mysql -u root -p
</code></pre>

<p>После того как вы введете пароль root пользователя MySQL, вы сможете начать взаимодействие с MySQL сервером.</p>

<p>Для создания базы данных и предоставления пользователям привилегий, введите следующую команду. Обратите внимание, двоеточие (;) в конце линии означает завершение вводы команды. Команда должна выглядеть следующим образом:</p>

<pre><code>create database test;
grant all on test.* to ’user’ identified by ’12345’;
</code></pre>

<p>В приведенном выше примере, test это имя базы данных, user - имя пользователя c паролем 12345. Обратите внимание, что база данных имен пользователей и паролей используются только подключения к базе данных. Использование этой базы не обязательно.</p>

<p>Мы завершили настройку MySQL и теперь вы можете передать учетные данные базы данных пользователям. Для выхода из администрирования MySQL введите следующую команду:</p>

<pre><code>quit
</code></pre>

<p>Apache и MySQL установлены, теперь вы готовы перейти к установке PHP.</p>

<h3 id="php">Установка и настройка PHP</h3>

<p>PHP — скриптовый язык программирования общего назначения, интенсивно применяемый для разработки веб-приложений. В настоящее время поддерживается подавляющим большинством хостинг-провайдеров и является одним из лидеров среди языков программирования, применяющихся для создания динамических веб-сайтов.</p>

<p>Для установки PHP выполните следующую команду:</p>

<pre><code>apt-get install php5 php-pear php5-suhosin
</code></pre>

<p>После того как PHP установлен нам нужно настроить файл конфигурации /etc/php5/apache2/php.ini. Изменения, которые мы внесем, достаточны для начала использования PHP.</p>

<p>Убедитесь, что следующие значения установлены, и соответствующие линии без комментариев (комментарии строк, начинающихся с запятой (;)):</p>

<p>Редактируем файл /etc/php5/apache2/php.ini</p>

<pre><code>max_execution_time = 30
memory_limit = 64M
error_reporting = E_COMPILE_ERROR|E_RECOVERABLE_ERROR|E_ERROR|E_CORE_ERROR
display_errors = Off 
log_errors = On 
error_log = /var/log/php.log  
register_globals = Off
</code></pre>

<p>Если вам нужна поддержка MySQL в PHP, то вы должны установить php5-MySQL пакет с помощью следующей команды:</p>

<pre><code>aptitude -y install php5-mysql
</code></pre>

<p>Список подключенных модулей для php можно получить, выполнив команду:</p>

<pre><code>php -m
</code></pre>

<p>Перезагрузите Apache выполнив команду:</p>

<pre><code>/etc/init.d/apache2 restart
</code></pre>

<h2 id="centosfedora">Установка на CentOS/Fedora</h2>

<h3 id="web-">Установка Web-сервера</h3>

<pre><code>yum update
yum install httpd
</code></pre>

<p>Конфигурационный файл Apache содержится в файле httpd.conf, который находится по адресу: /etc/httpd/conf/httpd.conf. Мы рекомендуем вам сделать резервную копию этого файла в вашем домашнем каталоге, например, так:</p>

<pre><code>cp /etc/httpd/conf/httpd.conf ~/httpd.conf.backup
</code></pre>

<p>По умолчанию все файлы с расширением .conf в каталоге /etc/httpd/conf.d/ рассматриваются как файлы конфигурации Apache, мы рекомендуем размещать ваши нестандартные конфигурации в этом каталоге. Независимо от того, где Вы разместите свои файлы конфигурации, регулярно создавайте резервные копии рабочих версий конфигурационных файлов.</p>

<p>Теперь мы настроим виртуальный хостинг, чтобы мы могли разместить несколько доменов (или субдоменов) на сервере. Созданными доменами можно управлять с помощью различных пользователей или одного пользователя.</p>

<p>Прежде чем начать работу, мы предлагаем вам объединить все конфигурации виртуального хостинга в один файл с именем vhost.conf, который будет расположен в каталоге /etc/httpd/conf.d/. Откройте этот файл в вашем любимом текстовом редакторе, и начните процесс создания виртуального хостинга.</p>

<h3 id="virtualhosts-1">Настройка Virtualhosts</h3>

<p>Существуют различные способы создания виртуальных хостов, однако мы рекомендуем метод описанный ниже.</p>

<p>По умолчанию, Apache прослушивает все IP-адреса, доступные виртуальному серверу. Мы должны настроить его на прослушивание только адреса, который мы укажем. Даже если у вас есть только один IP адрес, не стоит пренебрегать этой процедурой.</p>

<p>Начните с добавления следующей строки в файл конфигурации вашего виртуального хостинга:</p>

<p>Редактируем файл /etc/httpd/conf.d/vhost.conf:</p>

<pre><code>NameVirtualHost	62.76.41.150:80
</code></pre>

<p class="tip">Замените 62.76.41.150 на свой IP-адрес!</p>

<p>Теперь мы будем создавать виртуальный хост для каждого сайта, который мы разместим на виртуальном сервере. Для примера мы используем домены “clodo.com” и “bpn.ru”.</p>

<p>Редактируем файл /etc/httpd/conf.d/vhost.conf</p>

<pre><code>&lt;VirtualHost clodo.com:80&gt;
     ServerAdmin mail@clodo.com
     ServerName clodo.com
     ServerAlias www.clodo.com
     DocumentRoot /srv/www/clodo.com/public_html/
     ErrorLog /srv/www/clodo.com/logs/error.log 
     CustomLog /srv/www/clodo.com/logs/access.log combined
&lt;/VirtualHost&gt;

&lt;VirtualHost bpn.ru:80&gt;
     ServerAdmin admin@bpn.ru
     ServerName bpn.ru
     ServerAlias www.bpn.ru
     DocumentRoot /srv/www/bpn.ru/public_html/
     ErrorLog /srv/www/bpn.ru/logs/error.log 
     CustomLog /srv/www/bpn.ru/logs/access.log combined
&lt;/VirtualHost&gt;
</code></pre>

<p>Примечание по поводу этого примера конфигурации:</p>

<ul>
  <li>Каталог /srv/www для расположения файлов и скриптов для сайтов виртуального хостинга выбран для примера. При необходимости эти файлы можно расположить в других местах.</li>
  <li>ErrorLog и CustomLog создаются для отслеживания ошибок и сбора статистики. Их создание не обязательно. Если они определены (как показано выше), каталоги должны быть созданы до перезагрузки Apache.</li>
</ul>

<p>Перед тем, как мы станем использовать созданную конфигурацию, необходимо создать указанные в ней каталоги. Для этого выполним следующие команды:</p>

<pre><code>mkdir -p /srv/www/clodo.com/public_html
mkdir -p /srv/www/clodo.com/logs
mkdir -p /srv/www/bpn.ru/public_html
mkdir -p /srv/www/bpn.ru/logs
</code></pre>

<p>После того как вы настроили виртуальные хосты, выполните следующую команду для запуска Apache:</p>

<pre><code>/etc/init.d/httpd start
</code></pre>

<p>После запуска веб сервера нужно не забыть открыть его порты в firewall. Для открытия 80 порта нужно выполнить следующую команду:</p>

<pre><code>system-config-securitylevel-tui --quiet --port=80:tcp
</code></pre>

<p>Предполагается, что вы уже настроили DNS для вашего домена, виртуальный хостинг для вашего домена теперь должен работать. Помните, что Вы можете создать столько виртуальных хостов сколько вам необходимо.</p>

<p>Если вы хотите, чтобы Apache запускался по умолчанию при загрузке системы, выполните следующую команду:</p>

<pre><code>/sbin/chkconfig httpd on
</code></pre>

<p>После каждого изменения в вашем конфигурационном файле vhost.conf, или изменений в любом другом конфигурационном файле Apache, не забудьте перезагрузить веб-сервер с помощью следующей команды:</p>

<pre><code>/etc/init.d/httpd reload
</code></pre>

<h3 id="mysql-1">Установка и конфигурирование MySQL</h3>

<p>MySQL - система управления базами данных (СУБД) очень популярная в веб-разработке. MySQL используется для хранения данных для многих популярных веб-приложений.</p>

<p>Установка MySQL
Первым шагом является установка MySQL-сервера, для этого необходимо выполнить следующую команду:</p>

<pre><code>yum install mysql-server
</code></pre>

<p>Если вы хотите запустить MySQL по умолчанию при загрузке системы, выполните следующую команду:</p>

<pre><code>/sbin/chkconfig mysqld on
</code></pre>

<p>Теперь вы можете запустить MySQL демон (mysqld) с помощью следующей команды (от пользователя root):</p>

<pre><code>/etc/init.d/mysqld start
</code></pre>

<p>Теперь MySQL готова для настройки и запуска. В данный момент, нет необходимости изменять конфигурационный файл MySQL, можно лишь добавить, что распологается он здесь /etc/my.cnf.</p>

<p>Настройка MySQL и настройка базы данных MySQL
После установки MySQL, рекомендуется использовать mysql_secure_installation, эта программа поможет вам настроить безопасность в MySQL. Во время работы mysql_secure_installation, вам будет представлена возможность изменить пароль MySQL для root пользователя (по умолчанию он не установлен), удалить анонимные учетные записи пользователей и удалить тестовые базы данных. На все предложения запущенной программы рекомендуется, чтобы вы ответили “да” на все предложенные параметры. Если вам будет предложено перезагрузить таблицы привилегий, выберите “да”. Выполните следующую команду, чтобы запустить программу:</p>

<pre><code>mysql_secure_installation
</code></pre>

<p>Далее, мы создадим базу данных и предоставим пользователям разрешений на использование баз данных. Для этого необходимо войти в MySQL:</p>

<pre><code>mysql -u root -p
</code></pre>

<p>После того как вы введете пароль root пользователя MySQL, вы сможете начать взаимодействие с MySQL сервером.</p>

<p>Для создания базы данных и предоставления пользователям привилегий, введите следующую команду. Обратите внимание, двоеточие (;) в конце линии означает завершение вводы команды. Команда должна выглядеть следующим образом:</p>

<pre><code>create database test;
grant all on test.* to ’user’ identified by ’12345’;
</code></pre>

<p>В приведенном выше примере, test это имя базы данных, user - имя пользователя c паролем 12345. Обратите внимание, что база данных имен пользователей и паролей используются только подключения к базе данных. Использование этой базы не обязательно.</p>

<p>Мы завершили настройку MySQL и теперь вы можете передать учетные данные базы данных пользователям. Для выхода из администрирования MySQL введите следующую команду:</p>

<pre><code>quit
</code></pre>

<p>Apache и MySQL установлены, теперь вы готовы перейти к установке PHP.</p>

<h3 id="php-1">Установка и настройка PHP</h3>
<p>PHP — скриптовый язык программирования общего назначения, интенсивно применяемый для разработки веб-приложений. В настоящее время поддерживается подавляющим большинством хостинг-провайдеров и является одним из лидеров среди языков программирования, применяющихся для создания динамических веб-сайтов.</p>

<p>Для установки PHP выполните следующую команду:</p>

<pre><code>yum install php php-pear
</code></pre>

<p>После того как PHP установлен нам нужно настроить файл конфигурации /etc/php.ini. Изменения, которые мы внесем, достаточны для начала использования PHP.</p>

<p>Убедитесь, что следующие значения установлены, и соответствующие линии без комментариев (комментарии строк, начинающихся с запятой (;)):</p>

<p>Редактируем файл /etc/php.ini:</p>

<pre><code>error_reporting = E_COMPILE_ERROR|E_RECOVERABLE_ERROR|E_ERROR|E_CORE_ERROR
display_errors = Off 
log_errors = On 
error_log = /var/log/php.log
max_execution_time = 300 
memory_limit = 64M
register_globals = Off
</code></pre>

<p>Если вам нужна поддержка MySQL в PHP, то вы должны установить php5-MySQL пакет с помощью следующей команды:</p>

<pre><code>yum install php-mysql
</code></pre>

<h2 id="arch-linux">Установка на Arch Linux</h2>

<h3 id="web--apache-1">Установка и конфигурация web-сервера Apache</h3>

<p>Apache является очень популярным веб-сервером, даже не смотря на то, что в последние годы появилось много альтернатив. Apache остается решением, которое мы рекомендуем для решения большинства задач связанных с установкой веб-сервера.</p>

<p>Для установки текущей версии веб-сервера Apache (версии 2.x) необходимо выполнить следующую команду:</p>

<pre><code>pacman -S apache
</code></pre>

<p>Создайте резервную копию конфигурационного файла Apache, для этого выполните команду:</p>

<pre><code>cp /etc/httpd/conf/httpd.conf ~/httpd.conf.backup
</code></pre>

<p>Существуют и другие конфигурационные файлы Apache, которые подключаются в конце файла httpd.conf, и расположены в директории /etc/httpd/conf/extra/. Вы также можете создавать дополнительные конфигурационные файлы с использованием аналогичного синтаксиса. Мы рекомендуем регулярно создавать резервные копии всех ваших конфигурационных файлов.</p>

<p>По умолчанию ArchLinux не запускает Apache при перезагрузке системы. Чтобы включить автоматический запуск Apache мы должны создать соответствующую запись в файле /etc/rc.conf:</p>

<p>Редактируем файл /etc/rc.conf , находим строку, начинающуюся с DAEMONS. Допустим, она выглядит так:</p>

<pre><code>DAEMONS=(syslog-ng network netfs crond ntpdate sshd)
</code></pre>

<p>Добавляем в эту строку название стартового сценария веб-сервера apache - httpd:</p>

<pre><code>DAEMONS=(syslog-ng network netfs crond ntpdate sshd httpd)
</code></pre>

<p>Подготовка Apache к созданию виртуального хостинга
Теперь мы настроим Apache для размещения нескольких доменов (или субдоменов). Начните с определения узла по умолчанию. </p>

<p>Измените параметр DocumentRoot в файле /etc/httpd/conf/httpd.conf:</p>

<p>Редактируем файл /etc/httpd/conf/httpd.conf</p>

<pre><code>DocumentRoot "/srv/http/default"
</code></pre>

<p>В этом же файле найдите строчку содержащую запись &lt;Directory “/srv/httpd”&gt; и измените ее:</p>

<p>Редактируем файл /etc/httpd/conf/httpd.conf</p>

<pre><code>&lt;Directory "/srv/httpd/default"&gt;
</code></pre>

<p>Теперь, в этом же файле, раскомментируйте (уберите символ # в начале строки) строку, содержащую запись “Include conf/extra/httpd-vhosts.conf”</p>

<p>Все конфигурации для виртуального хостинга установки будут объединены в один файл с именем httpd-vhosts.conf, расположенном в директории /etc/httpd/conf/extra/. Откройте этот файл в вашем любимом текстовом редакторе, и мы начнем создание виртуального хостинга.</p>

<h3 id="virtualhosts-2">Настройка virtualhosts</h3>

<p>Существуют различные способы создания виртуальных хостов, однако мы рекомендуем метод описанный ниже.</p>

<p>По умолчанию, Apache прослушивает все IP-адреса, доступные виртуальному серверу. Мы должны настроить его на прослушивание только адреса, который мы укажем. Даже если у вас есть только один IP адрес, не стоит пренебрегать этой процедурой.</p>

<p>Начните с изменения параметра Listen в файле /etc/httpd/conf/httpd.conf:</p>

<pre><code>Listen	62.76.41.150:80
</code></pre>

<p>Замените 62.76.41.150 на IP адрес вашего виртуального сервера.</p>

<p>Следующим изменением станет параметр NameVirtualHost в файле /etc/httpd/conf/extra/httpd-vhosts.conf:</p>

<p>Редактируем файл /etc/httpd/conf/extra/httpd-vhosts.conf </p>

<pre><code>NameVirtualHost	62.76.41.150:80
</code></pre>

<p>Теперь, для примера, создадим конфигурационный файл для доменов “clodo.com” и “bpn.ru”..</p>

<p>Редактируем файл /etc/httpd/conf/extra/httpd-vhosts.conf</p>

<pre><code>&lt;VirtualHost 62.76.41.150:80&gt; 
     ServerAdmin mail@clodo.com
     ServerName clodo.com
     ServerAlias www.clodo.com
     DocumentRoot /srv/www/clodo.com/public_html/
     ErrorLog /srv/www/clodo.com/logs/error.log 
     CustomLog /srv/www/clodo.com/logs/access.log combined
            &lt;Directory /&gt;
               Order deny,allow
               Allow from all
            &lt;/Directory&gt;
&lt;/VirtualHost&gt;

&lt;VirtualHost 62.76.41.150:80&gt; 
     ServerAdmin admin@bpn.ru
     ServerName bpn.ru
     ServerAlias www.bpn.ru
     DocumentRoot /srv/www/bpn.ru/public_html/
     ErrorLog /srv/www/bpn.ru/logs/error.log 
     CustomLog /srv/www/bpn.ru/logs/access.log combined
            &lt;Directory /&gt;
               Order deny,allow
               Allow from all
            &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre>

<p>Примечание по поводу этого примера конфигурации:</p>

<p>Каталог /srv/www для расположения файлов и скриптов для сайтов виртуального хостинга выбран для примера. При необходимости эти файлы можно расположить в других местах.
ErrorLog и CustomLog создаются для отслеживания ошибок и сбора статистики. Их создание не обязательно. Если они определены (как показано выше), каталоги должны быть созданы до перезагрузки Apache.
Перед тем, как мы станем использовать созданную конфигурацию, необходимо создать указанные в ней каталоги. Для этого выполним следующие команды:</p>

<pre><code>mkdir -p /srv/www/clodo.com/public_html
mkdir /srv/www/clodo.com/logs
mkdir -p /srv/www/bpn.ru/public_html
mkdir /srv/www/bpn.ru/logs
</code></pre>

<p>Выполните следующую команду для запуска Apache:</p>

<pre><code>/etc/rc.d/httpd start
</code></pre>

<p>После внесения любых изменений в конфигурационный файл Apache, необходимо выполнять перезагрузку Apache. Для этого надо выполнить следующую команду:</p>

<pre><code>/etc/rc.d/httpd reload
</code></pre>

<p>Предполагается, что вы уже настроили DNS для вашего домена, виртуальный хостинг для вашего домена теперь должен работать. Помните, что Вы можете создать столько виртуальных хостов сколько вам необходимо.</p>

<h3 id="mysql-2">Установка и конфигурирование MySQL</h3>

<p>MySQL - система управления базами данных (СУБД) очень популярная в веб-разработке. MySQL используется для хранения данных для многих популярных веб-приложений.</p>

<p>Первым шагом является установка MySQL-сервера, для этого необходимо выполнить следующую команду:</p>

<pre><code>pacman -S mysql
</code></pre>

<p>Для запуска установленного MySQL-сервера введите следующую команду:</p>

<pre><code>/etc/rc.d/mysqld start
</code></pre>

<p>MySQL сервер готов для настройки и запуска. Конфигурационный файл MySQL распологается здесь - /etc/my.cnf.</p>

<p>Добавление MySQL в автозагрузку:</p>

<p>По умолчанию ArchLinux не запускает MySQL при перезагрузке системы. Чтобы включить автоматическую запуск MySQL, находим строку DAEMONS= в файле /etc/rc.conf и добавляем в неё имя стартового сценария mysqld, перед именем стартового сценария httpd:</p>

<p>Редактируем файл /etc/rc.conf </p>

<pre><code>DAEMONS=(syslog-ng network netfs crond ntpdate sshd mysqld httpd)
</code></pre>

<h3 id="mysql-----mysql-1">Настройка MySQL и настройка базы данных MySQL</h3>

<p>После установки MySQL, рекомендуется использовать mysql_secure_installation, эта программа поможет вам настроить безопасность в MySQL. Во время работы mysql_secure_installation, вам будет представлена возможность изменить пароль MySQL для root пользователя (по умолчанию он не установлен), удалить анонимные учетные записи пользователей и удалить тестовые базы данных. На все предложения запущенной программы рекомендуется, чтобы вы ответили “да”. Если вам будет предложено перезагрузить таблицы привилегий, выберите “да”. Выполните следующую команду, чтобы запустить программу:</p>

<pre><code>mysql_secure_installation
</code></pre>

<p>Далее, мы создадим базу данных и предоставим пользователям разрешения на использование баз данных. Для этого необходимо войти в MySQL:</p>

<pre><code>mysql -u root -p
</code></pre>

<p>После того как вы введете пароль root пользователя MySQL, вы сможете начать взаимодействие с MySQL сервером.</p>

<p>Для создания базы данных и предоставления пользователям привилегий, введите следующую команду. Обратите внимание, двоеточие (;) в конце строки означает завершение вводы команды. Команда должна выглядеть следующим образом:</p>

<pre><code>create database test;
grant all on test.* to ’user’ identified by ’12345’;
flush privileges;
</code></pre>

<p>В приведенном выше примере, test это имя базы данных, user - имя пользователя c паролем 12345.</p>

<p>Мы завершили настройку MySQL и теперь вы можете передать учетные данные базы данных пользователям. Для выхода из администрирования MySQL введите следующую команду:</p>

<pre><code>quit
</code></pre>

<p>Apache и MySQL установлены, теперь вы готовы перейти к установке PHP.</p>

<h3 id="php-2">Установка и настройка PHP</h3>

<p>PHP — скриптовый язык программирования общего назначения, интенсивно применяемый для разработки веб-приложений. В настоящее время поддерживается подавляющим большинством хостинг-провайдеров и является одним из лидеров среди языков программирования, применяющихся для создания динамических веб-сайтов.</p>

<p>Для установки PHP выполните следующую команду:</p>

<pre><code>pacman -S php php-apache php-suhosin libmcrypt libtool
</code></pre>

<p>После того как PHP установлен нам нужно настроить файл конфигурации /etc/php/php.ini. Изменения, которые мы внесем, достаточны для начала использования PHP.</p>

<p>Убедитесь, что следующие значения установлены, и соответствующие строки без комментариев (закомментированные строки, начинаются с точки с запятой (;)):</p>

<p>Редактируем файл /etc/php/php.ini</p>

<pre><code>error_reporting = E_COMPILE_ERROR|E_RECOVERABLE_ERROR|E_ERROR|E_CORE_ERROR
display_errors = Off 
log_errors = On 
error_log = /var/log/php.log
max_execution_time = 300 
memory_limit = 64M
register_globals = Off
open_basedir = /srv/http/:/srv/www:/tmp/:/usr/share/pear/
extension=mysql.so
</code></pre>

<p>После этого необходимо разрешить использование модуля PHP, для этого необходимо добавить в конфигурационный файл Apache соответствующие записи:</p>

<p>Редактируем файл /etc/httpd/conf/httpd.conf</p>

<pre><code>LoadModule php5_module modules/libphp5.so
Include conf/extra/php5_module.conf
</code></pre>

<p>Перезагрузите Apache выполнив команду:</p>

<pre><code>/etc/rc.d/httpd reload
</code></pre>

<p>Настройка LAMP Server закончена.</p>

<!-- ARTICLE _ END -->

<h6 class="usl">Условия использования документа</h6>
<p>Материал представленный на данной странице может быть использован Вами по своему усмотрению. Разрешается копирование и распространение предоставленного материала без изменения содержания и без предварительного уведомления администрации <a class='out' target='_blank' href="http://www.clodo.ru">Clodo.ru</a>.</p>
<p>Мы будем признательны Вам за сообщения об ошибках в представленной документации и за предложения об улучшении документации. По этим вопросам необходимо обращаться по адресу <a href="mailto:mail@clodo.ru">mail@clodo.ru</a>. При обращении не забывайте указывать URL-адрес публикации.</p>

					</div>
				</div>
			</div>

				</td>
			</tr>
		</table>
		</div>

			<div class="footer">
				Техническая поддержка: <a href="mailto:support@clodo.ru">support@clodo.ru</a> | СПб: +7 (812) 380-24-97 | Москва: +7 (499) 504-98-28 | Jabber: support@clodo.ru
			</div>

	</td></tr>
	</table>

</body>
</html>
